version: '3.8'

services:
  ftp:
    image: stilliard/pure-ftpd
    container_name: spectre-ftp
    ports:
      - "2121:21"
      - "30000-30009:30000-30009"
    environment:
      - PUBLICHOST=localhost
      - FTP_USER_NAME=ftpuser
      - FTP_USER_PASS=ftppass
      - FTP_USER_HOME=/home/ftpuser
    networks:
      - spectre-network
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "21"]
      interval: 5s
      timeout: 3s
      retries: 5

  sftp:
    build:
      context: ./docker/sftp
      dockerfile: Dockerfile
    container_name: spectre-sftp
    ports:
      - "2222:22"
    networks:
      - spectre-network
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "22"]
      interval: 5s
      timeout: 3s
      retries: 5

networks:
  spectre-network:
    driver: bridge
